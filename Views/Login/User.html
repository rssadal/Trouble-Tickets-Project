<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../../Style/master.css">
        <link rel="stylesheet" href="../../Style/user.css">
        <script src="../../Scripts/master.js"></script>
        <link type="image/png" sizes="32x32" rel="icon" href="../../Images/icon.png">
        <title>Login</title>
    </head>
    
    <body onload="loadData()">
        <header>
            <div onclick="goBacktoMainPage()" id="logo">
                <h2>Solve Us</h2>
            </div>
            
        </header>
        

        <div class="box">
            <h1><label id="name"></label></h1>
            <div id="forms">
                <div>
                    <div><label id="username"></label></div>
                    <div><label id="email"></label></div>
                    <div><label id="role"></label></div>
                </div>
                <div>
                    <button class="basic" onclick="edit()">Edit</button>
                    <button class="basic" onclick="logout()">Logout</button>
                    <button class="basic" id="tools" style="display: none;" onclick="openTools()">Tools</button>
                </div>                
            </div>
        </div>

        <footer>
            <div class="footer">
                University of Porto
            </div>
        </footer>
    </body>

    <script>
        function loadData() {
            fetch('User.php')
            .then(response => response.text())
            .then(data => {
                // Process the response data
                var label = document.getElementById('name');
                var username = document.getElementById('username');
                var email = document.getElementById('email');
                var role = document.getElementById('role');
                if(data.split(',')[3] == "Admin" ){
                    var tools= document.getElementById('tools');
                    tools.style.display = ""
                }
                label.innerHTML = data.split(',')[0];
                username.innerHTML = data.split(',')[1];
                email.innerHTML = data.split(',')[2];
                role.innerHTML = data.split(',')[3];
            })
            .catch(error => {
                // Handle any errors that occurred during the request
                console.error(error);
            });
        }
        function edit() {
            window.location.href = "../../Views/Login/edit.html";
        }
        function goBacktoMainPage() {
             window.location.href = "../../Views/Main/Index.html";
        }
        function logout() {
            window.location.href = "logout.php";
        }
        function assignedToMe() {
            window.location.href = "../Tickets/get_agent_tickets.php";
        }
        function openTools() {
            window.location.href = "../../Views/Tools/users.html";
        }
    </script>

    
</html>
